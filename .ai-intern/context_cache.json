{
  "base_context": "\n\n# FILE: cmd/server/main.go\npackage main\n\nimport (\n\t\"fitness-market/internal/database\"\n\t\"fitness-market/internal/handlers\"\n\t\"fitness-market/internal/middleware\"\n\t\"log\"\n\t\"os\"\n\n\t\"github.com/gin-gonic/gin\"\n\t\"github.com/joho/godotenv\"\n)\n\nfunc main() {\n\t// Load environment variables\n\tif err := godotenv.Load(); err != nil {\n\t\tlog.Println(\"No .env file found\")\n\t}\n\n\t// Initialize database\n\tdatabase.Init()\n\n\t// Run migrations\n\tdatabase.RunMigrations()\n\n\t// Setup Gin router\n\tr := gin.Default()\n\n\t// CORS middleware for frontend\n\tr.Use(func(c *gin.Context) {\n\t\tc.Header(\"Access-Control-Allow-Origin\", \"*\")\n\t\tc.Header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\")\n\t\tc.Header(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\")\n\t\tif c.Request.Method == \"OPTIONS\" {\n\t\t\tc.AbortWithStatus(204)\n\t\t\treturn\n\t\t}\n\t\tc.Next()\n\t})\n\n\t// Public routes\n\tr.GET(\"/health\", func(c *gin.Context) {\n\t\tc.JSON(200, gin.H{\"status\": \"ok\"})\n\t})\n\n\t// Auth routes (public)\n\tauth := r.Group(\"/api/v1/auth\")\n\t{\n\t\tauth.POST(\"/register\", handlers.Register)\n\t\tauth.POST(\"/login\", handlers.Login)\n\t\tauth.POST(\"/logout\", handlers.Logout)\n\t\tauth.POST(\"/reset-password\", handlers.RequestPasswordReset)\n\t\tauth.POST(\"/reset-password/confirm\", handlers.ResetPassword)\n\t}\n\n\t// Protected routes\n\tapi := r.Group(\"/api/v1\")\n\tapi.Use(middleware.AuthMiddleware())\n\t{\n\t\tapi.GET(\"/profile\", handlers.GetUserProfile)\n\n\t\t// Bodyweight routes\n\t\tapi.POST(\"/profile/bodyweight\", handlers.AddBodyweight)\n\t\tapi.GET(\"/profile/bodyweight\", handlers.GetBodyweightHistory)\n\n\t\t// Exercise PR routes\n\t\tapi.POST(\"/profile/exercise-prs\", handlers.AddExercisePR)\n\t\tapi.GET(\"/profile/exercise-prs\", handlers.GetExercisePRs)\n\t\tapi.PUT(\"/profile/exercise-prs/:id\", handlers.UpdateExercisePR)\n\t\tapi.DELETE(\"/profile/exercise-prs/:id\", handlers.DeleteExercisePR)\n\n\t\t// Exercise CRUD routes\n\t\tapi.POST(\"/exercises\", handlers.CreateExercise)\n\t\tapi.GET(\"/exercises\", handlers.GetExercises)\n\t\tapi.PUT(\"/exercises/:id\", handlers.UpdateExercise)\n\t\tapi.DELETE(\"/exercises/:id\", handlers.DeleteExercise)\n\n\t\t// Workout entry routes\n\t\tapi.POST(\"/entries\", handlers.CreateEntry)\n\t}\n\n\t// Start server\n\tport := os.Getenv(\"PORT\")\n\tif port == \"\" {\n\t\tport = \"8080\"\n\t}\n\n\tlog.Printf(\"Server starting on port %s\", port)\n\tlog.Fatal(r.Run(\":\" + port))\n}\n\n\n# FILE: go.mod\nmodule fitness-market\n\ngo 1.21.1\n\ntoolchain go1.22.0\n\nrequire (\n\tgithub.com/gin-gonic/gin v1.9.1\n\tgithub.com/golang-jwt/jwt/v5 v5.3.0\n\tgithub.com/joho/godotenv v1.5.1\n\tgithub.com/supabase-community/supabase-go v0.0.4\n\tgorm.io/driver/sqlite v1.5.4\n\tgorm.io/gorm v1.25.5\n)\n\nrequire (\n\tgithub.com/bytedance/sonic v1.9.1 // indirect\n\tgithub.com/chenzhuoyu/base64x v0.0.0-20221115062448-fe3a3abad311 // indirect\n\tgithub.com/gabriel-vasile/mimetype v1.4.2 // indirect\n\tgithub.com/gin-contrib/sse v0.1.0 // indirect\n\tgithub.com/go-playground/locales v0.14.1 // indirect\n\tgithub.com/go-playground/universal-translator v0.18.1 // indirect\n\tgithub.com/go-playground/validator/v10 v10.14.0 // indirect\n\tgithub.com/goccy/go-json v0.10.2 // indirect\n\tgithub.com/google/uuid v1.6.0 // indirect\n\tgithub.com/jinzhu/inflection v1.0.0 // indirect\n\tgithub.com/jinzhu/now v1.1.5 // indirect\n\tgithub.com/json-iterator/go v1.1.12 // indirect\n\tgithub.com/klauspost/cpuid/v2 v2.2.4 // indirect\n\tgithub.com/leodido/go-urn v1.2.4 // indirect\n\tgithub.com/mattn/go-isatty v0.0.19 // indirect\n\tgithub.com/mattn/go-sqlite3 v1.14.17 // indirect\n\tgithub.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd // indirect\n\tgithub.com/modern-go/reflect2 v1.0.2 // indirect\n\tgithub.com/pelletier/go-toml/v2 v2.0.8 // indirect\n\tgithub.com/supabase-community/functions-go v0.0.0-20220927045802-22373e6cb51d // indirect\n\tgithub.com/supabase-community/gotrue-go v1.2.0 // indirect\n\tgithub.com/supabase-community/postgrest-go v0.0.11 // indirect\n\tgithub.com/supabase-community/storage-go v0.7.0 // indirect\n\tgithub.com/tomnomnom/linkheader v0.0.0-20180905144013-02ca5825eb80 // indirect\n\tgithub.com/twitchyliquid64/golang-asm v0.15.1 // indirect\n\tgithub.com/ugorji/go/codec v1.2.11 // indirect\n\tgolang.org/x/arch v0.3.0 // indirect\n\tgolang.org/x/crypto v0.9.0 // indirect\n\tgolang.org/x/net v0.10.0 // indirect\n\tgolang.org/x/sys v0.8.0 // indirect\n\tgolang.org/x/text v0.9.0 // indirect\n\tgoogle.golang.org/protobuf v1.30.0 // indirect\n\tgopkg.in/yaml.v3 v3.0.1 // indirect\n)\n\n\n# FILE: README.md\n# fitness-market\n",
  "repo_path": "workspace/fitness-market",
  "git_commit_hash": "dec2528d9e0f0de5c237761c32b9c8b873c75bd0",
  "created_at": "2026-01-15T13:01:02.964184+05:30",
  "files_included": [
    "cmd/server/main.go",
    "go.mod",
    "README.md"
  ],
  "context_bytes": 4316
}